!function(){"use strict";var e,n={284:function(e,n,t){var r=window.ReactJSXRuntime,a=window.wp.blocks;function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function l(e,n){if(e){if("string"==typeof e)return i(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,n):void 0}}function o(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i,l,o=[],s=!0,u=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=i.call(t)).done)&&(o.push(r.value),o.length!==n);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return o}}(e,n)||l(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s=window.regeneratorRuntime,u=t.n(s),c=window.wp.blockEditor,d=window.wp.components,p=window.wp.element,f=window.wp.apiFetch,h=t.n(f),v=window.wp.i18n,g=function(e){var n=[];e._place_NAME&&n.push(e._place_NAME);var t=[];e._place_STREET_NR&&t.push(e._place_STREET_NR);var r=[e._place_ZIP,e._place_CITY].filter(Boolean).join(" ").trim();if(r&&t.push(r),t.length&&n.push(t.join(", ")),n.length)return n.join(", ")},m=function(e){return e?e.replace(".",":"):void 0},b=JSON.parse('{"UU":"evangelische-termine-ausgeben/evangelische-termine"}');(0,a.registerBlockType)(b.UU,{icon:{src:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"evenodd",children:(0,r.jsx)("path",{d:"M480-120q-91 0-158.5-57.5T243-324q-72-14-117.5-70T80-522q0-83 58.5-140.5T280-720h100q8 0 14-6t6-14q0-8-6-14t-14-6h-60q-17 0-28.5-11.5T280-800q0-17 11.5-28.5T320-840h60q42 0 71 29t29 71q0 42-29 71t-71 29H280q-50 0-85 34t-35 83q0 40 23 72.5t61 44.5q16-85 81.5-139.5T478-600q20 0 39.5 3t36.5 8q8-3 15.5-5t15.5-3.5q8-1.5 17-2t18-.5q73 0 126 51t53 126q0 9-.5 16t-2.5 11l38 35q23 20 34 46.5t11 55.5q0 58-40.5 98.5T741-120H480Zm0-80h261q24 0 41.5-17.5T800-259q0-13-5-24t-14-19l-75-68q8-11 11-24t3-27q0-42-29-70.5T620-520q-42 0-71 29t-29 71q0 20 7 38.5t22 32.5l-56 56q-28-23-40.5-58T440-423q0-26 7-50t21-46q-60 0-104 47t-44 112q0 33 12.5 62.5t34.5 51q22 21.5 51 34t62 12.5Zm200-40q-17 0-28.5-11.5T640-280q0-17 11.5-28.5T680-320q17 0 28.5 11.5T720-280q0 17-11.5 28.5T680-240ZM560-400Z"})})},__experimentalLabel:function(e,n){var t=n.context,r=e.title;if("list-view"===t&&r)return r},edit:function(e){var n=this,t=e.attributes,a=e.setAttributes,s=(0,c.useBlockProps)(),f=t.id,b=t.limit,_=t.eventType,x=void 0===_?"":_,T=t.people,w=void 0===T?"":T,y=t.placeType,j=void 0===y?"":y,q=t.searchText,S=void 0===q?"":q,C=t.heading,O=void 0===C?"Veranstaltungen":C,E=o((0,p.useState)([]),2),A=E[0],V=E[1],I=o((0,p.useState)(null),2),R=I[0],N=I[1],k=o((0,p.useState)(!1),2),D=k[0],P=k[1],U=(0,v.__)("Alle Veranstaltungstypen","evangelische-termine-ausgeben"),Z=(0,v.__)("Alle Zielgruppen","evangelische-termine-ausgeben"),B=(0,v.__)("Alle Orte","evangelische-termine-ausgeben"),F=o((0,p.useState)([{label:U,value:""}]),2),L=F[0],M=F[1],H=o((0,p.useState)([{label:Z,value:""}]),2),z=H[0],G=H[1],J=o((0,p.useState)([{label:B,value:""}]),2),K=J[0],W=J[1],X=(0,p.useMemo)((function(){var e;if(!j)return null;var n=K.find((function(e){return e.value===j&&""!==e.value}));return null!==(e=null==n?void 0:n.label)&&void 0!==e?e:null}),[K,j]);return(0,p.useEffect)((function(){var e,t,r,a,o=!0,s=[{endpoint:"eventtypes",setter:M,label:U},{endpoint:"people",setter:G,label:Z},{endpoint:"placetype",setter:W,label:B}];return e=n,t=void 0,r=void 0,a=u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled(s.map((function(e){return n=e.endpoint,h()({path:"evangelische-termine-ausgeben/v1/data?endpoint=".concat(n)});var n})));case 2:if(n=e.sent,o){e.next=5;break}return e.abrupt("return");case 5:n.forEach((function(e,n){if("fulfilled"===e.status){var t=s[n];t.setter((a=e.value,[{label:t.label,value:""}].concat(function(e){if(Array.isArray(e))return i(e)}(r=a.map((function(e){return{label:e.name,value:String(e.id)}})))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||l(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())))}else console.error("Error fetching ".concat(s[n].endpoint,":"),e.reason);var r,a}));case 6:case"end":return e.stop()}}),e)})),new(r||(r=Promise))((function(n,i){function l(e){try{s(a.next(e))}catch(e){i(e)}}function o(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(l,o)}s((a=a.apply(e,t||[])).next())})),function(){o=!1}}),[U,Z,B]),(0,p.useEffect)((function(){if(f&&(!j||X)){P(!0);var e=new URLSearchParams;e.append("vid",f),b&&e.append("itemsPerPage",String(b)),x&&e.append("eventtype",x),w&&e.append("people",w),j&&e.append("placetype",j);var n=e.toString();h()({path:"evangelische-termine-ausgeben/v1/data?endpoint=events&".concat(n)}).then((function(e){console.log(e);var n=e.map((function(e){return{id:e.Veranstaltung.ID,title:e.Veranstaltung._event_TITLE,datum:e.Veranstaltung.DATUM,startRFC:e.Veranstaltung.START_RFC,startTime:m(e.Veranstaltung.START_UHRZEIT),endTime:m(e.Veranstaltung.END_UHRZEIT),placeCategory:e.Veranstaltung._place_KAT,shortDescription:e.Veranstaltung._event_SHORT_DESCRIPTION,longDescription:e.Veranstaltung._event_LONG_DESCRIPTION,location:g(e.Veranstaltung),detailsUrl:e.Veranstaltung.ID?"https://www.evangelische-termine.de/d-".concat(e.Veranstaltung.ID):void 0}}));j&&X&&(n=n.filter((function(e){return e.placeCategory===X})));var t=S.trim().toLowerCase();t&&(n=n.filter((function(e){return[e.title,e.shortDescription,e.longDescription].filter(Boolean).map((function(e){return e.toLowerCase()})).some((function(e){return e.includes(t)}))}))),V(n),N(null),P(!1)})).catch((function(e){console.error("Error fetching events:",e),N((0,v.__)("Fehler beim Abrufen der Veranstaltungen.","evangelische-termine-ausgeben")),P(!1)}))}}),[f,b,x,w,j,X,S]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.InspectorControls,{children:(0,r.jsxs)(d.PanelBody,{title:(0,v.__)("Einstellungen","evangelische-termine-ausgeben"),children:[(0,r.jsx)(d.TextControl,{label:(0,v.__)("Überschrift","evangelische-termine-ausgeben"),value:O,onChange:function(e){return a({heading:e})},help:(0,v.__)("Leer lassen, um keine Überschrift anzuzeigen.","evangelische-termine-ausgeben")}),(0,r.jsx)(d.TextControl,{label:(0,v.__)("Veranstalter ID","evangelische-termine-ausgeben"),value:f,onChange:function(e){return a({id:e})},help:(0,v.__)("Geben Sie die Veranstalter-ID ein.","evangelische-termine-ausgeben")}),(0,r.jsx)(d.RangeControl,{label:(0,v.__)("Anzahl der Veranstaltungen","evangelische-termine-ausgeben"),value:b,onChange:function(e){return a({limit:e})},min:1,max:50}),(0,r.jsx)(d.SelectControl,{label:(0,v.__)("Veranstaltungstyp","evangelische-termine-ausgeben"),value:x,options:L,onChange:function(e){return a({eventType:e})}}),(0,r.jsx)(d.SelectControl,{label:(0,v.__)("Zielgruppe","evangelische-termine-ausgeben"),value:w,options:z,onChange:function(e){return a({people:e})}}),(0,r.jsx)(d.SelectControl,{label:(0,v.__)("Ortskategorie","evangelische-termine-ausgeben"),value:j,options:K,onChange:function(e){return a({placeType:e})}}),(0,r.jsx)(d.TextControl,{label:(0,v.__)("Nur Veranstaltungen mit folgendem Text","evangelische-termine-ausgeben"),value:S,onChange:function(e){return a({searchText:e})},help:(0,v.__)("Filtert nach Titel oder Beschreibung.","evangelische-termine-ausgeben")})]})}),(0,r.jsxs)("div",Object.assign({},s,{children:[O&&(0,r.jsx)("h2",{children:O}),D&&(0,r.jsx)("p",{children:(0,v.__)("Lade Veranstaltungen...","evangelische-termine-ausgeben")}),R&&(0,r.jsx)("p",{style:{color:"red"},children:R}),(0,r.jsx)("dl",{children:A.map((function(e){var n,t,a=function(e){if(e)return e.replace(/\s+\d{1,2}(?:[.:]\d{1,2})?(?:\s*-\s*\d{1,2}(?:[.:]\d{1,2})?)?\s*uhr/gi,"").trim()||e}(e.datum),i=(n=e.startTime,t=e.endTime,n&&t?"".concat(n," - ").concat(t):n||t||void 0);return(0,r.jsxs)(p.Fragment,{children:[(0,r.jsx)("dt",{children:e.title&&(0,r.jsx)("strong",{children:e.detailsUrl?(0,r.jsx)("a",{href:e.detailsUrl,target:"_blank",rel:"noopener noreferrer",children:e.title}):e.title})}),a&&(0,r.jsx)("dd",{className:"ln-eta-date",children:(0,r.jsx)("span",{className:"ln-eta-date-text",children:a})}),i&&(0,r.jsx)("dd",{className:"ln-eta-time",children:(0,r.jsx)("span",{className:"ln-eta-time-text",children:i})}),e.location&&(0,r.jsx)("dd",{className:"ln-eta-location",children:(0,r.jsx)("span",{className:"ln-eta-location-text",children:e.location})})]},e.id)}))})]}))]})},save:function(e){var n=e.attributes,t=c.useBlockProps.save();return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",Object.assign({},t,{children:(0,r.jsxs)("h2",{children:["Hello World! ",n.title]})}))})}})}},t={};function r(e){var a=t[e];if(void 0!==a)return a.exports;var i=t[e]={exports:{}};return n[e](i,i.exports,r),i.exports}r.m=n,e=[],r.O=function(n,t,a,i){if(!t){var l=1/0;for(c=0;c<e.length;c++){t=e[c][0],a=e[c][1],i=e[c][2];for(var o=!0,s=0;s<t.length;s++)(!1&i||l>=i)&&Object.keys(r.O).every((function(e){return r.O[e](t[s])}))?t.splice(s--,1):(o=!1,i<l&&(l=i));if(o){e.splice(c--,1);var u=a();void 0!==u&&(n=u)}}return n}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[t,a,i]},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,{a:n}),n},r.d=function(e,n){for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},function(){var e={312:0,40:0};r.O.j=function(n){return 0===e[n]};var n=function(n,t){var a,i,l=t[0],o=t[1],s=t[2],u=0;if(l.some((function(n){return 0!==e[n]}))){for(a in o)r.o(o,a)&&(r.m[a]=o[a]);if(s)var c=s(r)}for(n&&n(t);u<l.length;u++)i=l[u],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(c)},t=self.webpackChunkevangelische_termine_ausgeben=self.webpackChunkevangelische_termine_ausgeben||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))}();var a=r.O(void 0,[40],(function(){return r(284)}));a=r.O(a)}();