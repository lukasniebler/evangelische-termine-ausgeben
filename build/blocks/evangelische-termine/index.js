!function(){"use strict";var e,n={284:function(e,n,t){var r=window.ReactJSXRuntime,a=window.wp.blocks;function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function l(e,n){if(e){if("string"==typeof e)return i(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,n):void 0}}function o(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i,l,o=[],s=!0,u=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=i.call(t)).done)&&(o.push(r.value),o.length!==n);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return o}}(e,n)||l(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s=window.regeneratorRuntime,u=t.n(s),c=window.wp.blockEditor,h=window.wp.components,g=window.wp.element,v=window.wp.apiFetch,p=t.n(v),d=window.wp.i18n,f=function(e){var n=[];e._place_NAME&&n.push(e._place_NAME);var t=[];e._place_STREET_NR&&t.push(e._place_STREET_NR);var r=[e._place_ZIP,e._place_CITY].filter(Boolean).join(" ").trim();if(r&&t.push(r),t.length&&n.push(t.join(", ")),n.length)return n.join(", ")},m=function(e){return e?e.replace(".",":"):void 0},b=JSON.parse('{"UU":"evangelische-termine-ausgeben/evangelische-termine"}');(0,a.registerBlockType)(b.UU,{icon:{src:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"evenodd",children:(0,r.jsx)("path",{d:"M480-120q-91 0-158.5-57.5T243-324q-72-14-117.5-70T80-522q0-83 58.5-140.5T280-720h100q8 0 14-6t6-14q0-8-6-14t-14-6h-60q-17 0-28.5-11.5T280-800q0-17 11.5-28.5T320-840h60q42 0 71 29t29 71q0 42-29 71t-71 29H280q-50 0-85 34t-35 83q0 40 23 72.5t61 44.5q16-85 81.5-139.5T478-600q20 0 39.5 3t36.5 8q8-3 15.5-5t15.5-3.5q8-1.5 17-2t18-.5q73 0 126 51t53 126q0 9-.5 16t-2.5 11l38 35q23 20 34 46.5t11 55.5q0 58-40.5 98.5T741-120H480Zm0-80h261q24 0 41.5-17.5T800-259q0-13-5-24t-14-19l-75-68q8-11 11-24t3-27q0-42-29-70.5T620-520q-42 0-71 29t-29 71q0 20 7 38.5t22 32.5l-56 56q-28-23-40.5-58T440-423q0-26 7-50t21-46q-60 0-104 47t-44 112q0 33 12.5 62.5t34.5 51q22 21.5 51 34t62 12.5Zm200-40q-17 0-28.5-11.5T640-280q0-17 11.5-28.5T680-320q17 0 28.5 11.5T720-280q0 17-11.5 28.5T680-240ZM560-400Z"})})},__experimentalLabel:function(e,n){var t=n.context,r=e.title;if("list-view"===t&&r)return r},edit:function(e){var n=this,t=e.attributes,a=e.setAttributes,s=(0,c.useBlockProps)(),v=t.id,b=t.limit,_=t.eventType,x=void 0===_?"":_,T=t.people,w=void 0===T?"":T,q=t.placeType,y=void 0===q?"":q,j=t.searchText,C=void 0===j?"":j,S=t.heading,E=void 0===S?"Veranstaltungen":S,O=o((0,g.useState)([]),2),N=O[0],I=O[1],V=o((0,g.useState)(null),2),A=V[0],R=V[1],k=o((0,g.useState)(!1),2),D=k[0],F=k[1],P=(0,d.__)("Alle Veranstaltungstypen","evangelische-termine-ausgeben"),U=(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"evenodd",children:(0,r.jsx)("path",{d:"m320-40-64-48 84-112H240q0-35 19.5-120.5T313-495q34-90 80.5-157.5T494-720q37 0 51.5 23t41.5 69q32 54 58 81t56 41q11-8 19-11t19-3q25 0 43 18t18 42v420h-40v-420q0-8-6-14t-14-6q-8 0-14 6t-6 14v50h-40v-19q-38-21-78-54.5T543-557l-23 117 80 239v161h-80v-160h-80L320-40Zm220-700q-33 0-56.5-23.5T460-820q0-8 4-24-11-5-17.5-14.5T440-880q0-17 11.5-28.5T480-920q12 0 21.5 6.5T516-896q6-2 12-3t12-1q33 0 56.5 23.5T620-820q0 33-23.5 56.5T540-740Z"})}),Z=(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"evenodd",children:(0,r.jsx)("path",{d:"M360-80v-529q-91-24-145.5-100.5T160-880h80q0 83 53.5 141.5T430-680h100q30 0 56 11t47 32l181 181-56 56-158-158v478h-80v-240h-80v240h-80Zm120-640q-33 0-56.5-23.5T400-800q0-33 23.5-56.5T480-880q33 0 56.5 23.5T560-800q0 33-23.5 56.5T480-720Z"})}),B=(0,d.__)("Alle Zielgruppen","evangelische-termine-ausgeben"),L=(0,d.__)("Alle Orte","evangelische-termine-ausgeben"),H=o((0,g.useState)([{label:P,value:""}]),2),M=H[0],z=H[1],K=o((0,g.useState)([{label:B,value:""}]),2),G=K[0],J=K[1],W=o((0,g.useState)([{label:L,value:""}]),2),X=W[0],Y=W[1],$=(0,g.useMemo)((function(){var e;if(!y)return null;var n=X.find((function(e){return e.value===y&&""!==e.value}));return null!==(e=null==n?void 0:n.label)&&void 0!==e?e:null}),[X,y]);return(0,g.useEffect)((function(){var e,t,r,a,o=!0,s=[{endpoint:"eventtypes",setter:z,label:P},{endpoint:"people",setter:J,label:B},{endpoint:"placetype",setter:Y,label:L}];return e=n,t=void 0,r=void 0,a=u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled(s.map((function(e){return n=e.endpoint,p()({path:"evangelische-termine-ausgeben/v1/data?endpoint=".concat(n)});var n})));case 2:if(n=e.sent,o){e.next=5;break}return e.abrupt("return");case 5:n.forEach((function(e,n){if("fulfilled"===e.status){var t=s[n];t.setter((a=e.value,[{label:t.label,value:""}].concat(function(e){if(Array.isArray(e))return i(e)}(r=a.map((function(e){return{label:e.name,value:String(e.id)}})))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||l(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())))}else console.error("Error fetching ".concat(s[n].endpoint,":"),e.reason);var r,a}));case 6:case"end":return e.stop()}}),e)})),new(r||(r=Promise))((function(n,i){function l(e){try{s(a.next(e))}catch(e){i(e)}}function o(e){try{s(a.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(l,o)}s((a=a.apply(e,t||[])).next())})),function(){o=!1}}),[P,B,L]),(0,g.useEffect)((function(){if(v&&(!y||$)){F(!0);var e=new URLSearchParams;e.append("vid",v),b&&e.append("itemsPerPage",String(b)),x&&e.append("eventtype",x),w&&e.append("people",w),y&&e.append("placetype",y);var n=e.toString();p()({path:"evangelische-termine-ausgeben/v1/data?endpoint=events&".concat(n)}).then((function(e){var n=e.map((function(e){return{id:e.Veranstaltung.ID,title:e.Veranstaltung._event_TITLE,datum:e.Veranstaltung.DATUM,startRFC:e.Veranstaltung.START_RFC,startTime:m(e.Veranstaltung.START_UHRZEIT),endTime:m(e.Veranstaltung.END_UHRZEIT),placeCategory:e.Veranstaltung._place_KAT,shortDescription:e.Veranstaltung._event_SHORT_DESCRIPTION,longDescription:e.Veranstaltung._event_LONG_DESCRIPTION,location:f(e.Veranstaltung),detailsUrl:e.Veranstaltung.ID?"https://www.evangelische-termine.de/d-".concat(e.Veranstaltung.ID):void 0}}));y&&$&&(n=n.filter((function(e){return e.placeCategory===$})));var t=C.trim().toLowerCase();t&&(n=n.filter((function(e){return[e.title,e.shortDescription,e.longDescription].filter(Boolean).map((function(e){return e.toLowerCase()})).some((function(e){return e.includes(t)}))}))),I(n),R(null),F(!1)})).catch((function(e){console.error("Error fetching events:",e),R((0,d.__)("Fehler beim Abrufen der Veranstaltungen.","evangelische-termine-ausgeben")),F(!1)}))}}),[v,b,x,w,y,$,C]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.BlockControls,{children:(0,r.jsx)(h.ToolbarGroup,{children:(0,r.jsx)(h.Button,{icon:t.legacy?U:Z,label:t.legacy?(0,d.__)("Legacy mode active","evangelische-termine-ausgeben"):(0,d.__)("Legacy mode inactive","evangelische-termine-ausgeben"),onClick:function(){return a({legacy:!t.legacy})}})})}),(0,r.jsx)(c.InspectorControls,{children:(0,r.jsxs)(h.PanelBody,{title:(0,d.__)("Einstellungen","evangelische-termine-ausgeben"),children:[(0,r.jsx)(h.TextControl,{label:(0,d.__)("Überschrift","evangelische-termine-ausgeben"),value:E,onChange:function(e){return a({heading:e})},help:(0,d.__)("Leer lassen, um keine Überschrift anzuzeigen.","evangelische-termine-ausgeben")}),(0,r.jsx)(h.TextControl,{label:(0,d.__)("Veranstalter ID","evangelische-termine-ausgeben"),value:v,onChange:function(e){return a({id:e})},help:(0,d.__)("Geben Sie die Veranstalter-ID ein.","evangelische-termine-ausgeben")}),(0,r.jsx)(h.RangeControl,{label:(0,d.__)("Anzahl der Veranstaltungen","evangelische-termine-ausgeben"),value:b,onChange:function(e){return a({limit:e})},min:1,max:50}),(0,r.jsx)(h.SelectControl,{label:(0,d.__)("Veranstaltungstyp","evangelische-termine-ausgeben"),value:x,options:M,onChange:function(e){return a({eventType:e})}}),(0,r.jsx)(h.TextControl,{label:(0,d.__)("Veranstaltungstyp","evangelische-termine-ausgeben"),value:x,onChange:function(e){return a({eventType:e})},help:(0,d.__)("Ermöglicht die Nutzung von negativen Filterwerten (NICHT), Komma-separierten Filtern (ODER) und Punkt-separierten Filtern (UND).","evangelische-termine-ausgeben")}),(0,r.jsx)(h.SelectControl,{label:(0,d.__)("Zielgruppe","evangelische-termine-ausgeben"),value:w,options:G,onChange:function(e){return a({people:e})}}),(0,r.jsx)(h.TextControl,{label:(0,d.__)("Zielgruppe","evangelische-termine-ausgeben"),value:w,onChange:function(e){return a({people:e})},help:(0,d.__)("Ermöglicht die Nutzung von negativen Filterwerten (NICHT), Komma-separierten Filtern (ODER) und Punkt-separierten Filtern (UND).","evangelische-termine-ausgeben")}),(0,r.jsx)(h.SelectControl,{label:(0,d.__)("Ortskategorie","evangelische-termine-ausgeben"),value:y,options:X,onChange:function(e){return a({placeType:e})}}),(0,r.jsx)(h.TextControl,{label:(0,d.__)("Ortskategorie","evangelische-termine-ausgeben"),value:y,onChange:function(e){return a({placeType:e})},help:(0,d.__)("Ermöglicht die Nutzung von negativen Filterwerten (NICHT), Komma-separierten Filtern (ODER) und Punkt-separierten Filtern (UND).","evangelische-termine-ausgeben")}),(0,r.jsx)(h.TextControl,{label:(0,d.__)("Nur Veranstaltungen mit folgendem Text","evangelische-termine-ausgeben"),value:C,onChange:function(e){return a({searchText:e})},help:(0,d.__)("Filtert nach Titel oder Beschreibung.","evangelische-termine-ausgeben")})]})}),(0,r.jsxs)("div",Object.assign({},s,{children:[E&&(0,r.jsx)("h2",{children:E}),D&&(0,r.jsx)("p",{children:(0,d.__)("Lade Veranstaltungen...","evangelische-termine-ausgeben")}),A&&(0,r.jsx)("p",{style:{color:"red"},children:A}),(0,r.jsx)("dl",{children:N.map((function(e){var n,t,a=function(e){if(e)return e.replace(/\s+\d{1,2}(?:[.:]\d{1,2})?(?:\s*-\s*\d{1,2}(?:[.:]\d{1,2})?)?\s*uhr/gi,"").trim()||e}(e.datum),i=(n=e.startTime,t=e.endTime,n&&t?"".concat(n," - ").concat(t):n||t||void 0);return(0,r.jsxs)(g.Fragment,{children:[(0,r.jsx)("dt",{children:e.title&&(0,r.jsx)("strong",{children:e.detailsUrl?(0,r.jsx)("a",{href:e.detailsUrl,rel:"noopener noreferrer",children:e.title}):e.title})}),a&&(0,r.jsx)("dd",{className:"ln-eta-date",children:(0,r.jsx)("span",{className:"ln-eta-date-text",children:a})}),i&&(0,r.jsx)("dd",{className:"ln-eta-time",children:(0,r.jsx)("span",{className:"ln-eta-time-text",children:i})}),e.location&&(0,r.jsx)("dd",{className:"ln-eta-location",children:(0,r.jsx)("span",{className:"ln-eta-location-text",children:e.location})})]},e.id)}))})]}))]})},save:function(e){var n=e.attributes,t=c.useBlockProps.save();return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",Object.assign({},t,{children:(0,r.jsxs)("h2",{children:["Hello World! ",n.title]})}))})}})}},t={};function r(e){var a=t[e];if(void 0!==a)return a.exports;var i=t[e]={exports:{}};return n[e](i,i.exports,r),i.exports}r.m=n,e=[],r.O=function(n,t,a,i){if(!t){var l=1/0;for(c=0;c<e.length;c++){t=e[c][0],a=e[c][1],i=e[c][2];for(var o=!0,s=0;s<t.length;s++)(!1&i||l>=i)&&Object.keys(r.O).every((function(e){return r.O[e](t[s])}))?t.splice(s--,1):(o=!1,i<l&&(l=i));if(o){e.splice(c--,1);var u=a();void 0!==u&&(n=u)}}return n}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[t,a,i]},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,{a:n}),n},r.d=function(e,n){for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},function(){var e={312:0,40:0};r.O.j=function(n){return 0===e[n]};var n=function(n,t){var a,i,l=t[0],o=t[1],s=t[2],u=0;if(l.some((function(n){return 0!==e[n]}))){for(a in o)r.o(o,a)&&(r.m[a]=o[a]);if(s)var c=s(r)}for(n&&n(t);u<l.length;u++)i=l[u],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(c)},t=self.webpackChunkevangelische_termine_ausgeben=self.webpackChunkevangelische_termine_ausgeben||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))}();var a=r.O(void 0,[40],(function(){return r(284)}));a=r.O(a)}();